# ==========================================================
# Netlify Configuration File
#
# Цей файл визначає, як Netlify буде збирати, розгортати
# та обслуговувати ваш сайт.
# ==========================================================

# Секція налаштувань збірки
[build]
  # Команда для збірки вашого Vite-проєкту.
  command = "npm run build"
  
  # Директорія, куди Vite складає готові файли сайту.
  publish = "dist"
  
  # Директорія, де знаходяться ваші безсерверні функції.
  functions = "netlify/functions"

# ==========================================================
# Правила переадресації (Redirects and Rewrites)
#
# Правила обробляються по порядку. Більш конкретні
# правила повинні йти перед більш загальними.
# ==========================================================

# Правило 1: Проксі для API-запитів до безсерверних функцій.
# Це найважливіше правило для виправлення помилок 404.
# Воно перехоплює всі запити, що починаються з /api/,
# і направляє їх до відповідної функції, не змінюючи URL
# в браузері клієнта.
[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/:splat"
  status = 200 # Статус 200 означає "переписування" (rewrite), а не "переадресацію".

# Правило 2: Резервне правило для односторінкових додатків (SPA).
# Це стандартне правило для додатків на React, Vue тощо.
# Воно гарантує, що при прямому переході на будь-який URL
# (наприклад, yoursite.com/orders) буде завантажуватися
# ваш index.html, дозволяючи React Router-у обробити маршрут.
# Це правило ПОВИННО бути останнім.
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
