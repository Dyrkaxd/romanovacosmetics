# Netlify configuration file

# Build settings for your Vite project
[build]
  # This command is run to build your site
  command = "npm run build"
  
  # The directory where the built site is located
  publish = "dist"
  
  # The directory where your serverless functions are located
  functions = "netlify/functions"

# Redirect and Rewrite rules

# Rule 1: API Proxy for serverless functions
# This rule rewrites all requests from /api/* to your Netlify functions.
# This is crucial for your frontend to be able to call your backend functions.
[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/:splat"
  status = 200 # A 200 status makes this a rewrite (like a proxy)

# Rule 2: Fallback for Single Page Applications (SPA)
# This rule ensures that any direct navigation to a client-side route (e.g., /orders)
# is handled by your index.html, allowing React Router to manage the URL.
# This rule MUST come after any more specific rules like the API proxy.
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
