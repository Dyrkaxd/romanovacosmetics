# Глобальные настройки для вашего сайта на Netlify
[build]
  # Команда, которая запускается для сборки вашего сайта.
  # Она определена в вашем файле package.json.
  command = "npm run build"

  # Директория, содержащая файлы вашего собранного сайта.
  # Vite обычно выводит результат в директорию 'dist'.
  publish = "dist"

  # Директория, содержащая ваши бессерверные функции.
  functions = "netlify/functions"

# Настройки для локальной разработки с использованием `netlify dev`
# Эти настройки помогают `netlify dev` правильно запускать ваш Vite сервер.
[dev]
  # Команда для запуска вашего сервера разработки.
  command = "vite"
  # Порт, на котором будет работать ваш сервер разработки (Vite).
  targetPort = 5173
  # Порт, который будет слушать Netlify Dev для проксирования всего.
  port = 8888
  # Автоматически открывать браузер, когда сервер разработки будет готов.
  autoLaunch = true

# Правило перенаправления для API-вызовов для проксирования на Netlify Functions.
# Это крайне важно для того, чтобы ваши вызовы /api/... работали как локально
# с `netlify dev`, так и в продакшене на Netlify.
[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/:splat"
  status = 200 # Статус 200 делает это перезаписью (rewrite), а не перенаправлением (redirect).

# Правило перенаправления для одностраничных приложений (SPA).
# Это гарантирует, что все пути будут направлены на ваш index.html,
# чтобы ваш клиентский маршрутизатор (React Router) мог их обработать.
# Это правило должно быть последним.
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
