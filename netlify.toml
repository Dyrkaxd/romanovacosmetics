# ==============================================================================
# Netlify Configuration File
#
# Цей файл визначає, як Netlify буде збирати та розгортати ваш сайт.
# Він також містить правила переадресації для роботи з API та односторінковими
# додатками (SPA).
# ==============================================================================

# Налаштування процесу збірки
[build]
  # Команда, яка запускається для збірки вашого проєкту.
  # "npm run build" є стандартною для проєктів на Vite.
  command = "npm run build"
  
  # Директорія, де знаходяться зібрані файли вашого сайту.
  # Vite за замовчуванням створює папку "dist".
  publish = "dist"
  
  # Директорія, де знаходяться ваші безсерверні функції Netlify.
  functions = "netlify/functions"

# ==============================================================================
# Правила переадресації та переписування шляхів (Redirects and Rewrites)
#
# Правила виконуються в тому порядку, в якому вони написані.
# Більш конкретні правила мають йти перед більш загальними.
# ==============================================================================

# Правило №1: Перенаправлення API-запитів до безсерверних функцій
# Це найважливіше правило для виправлення помилок 404.
# Воно перехоплює всі запити, що починаються з /api/, і направляє їх 
# до відповідної функції в Netlify, не змінюючи URL в браузері.
[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/:splat"
  status = 200 # Статус 200 означає "переписування" (rewrite), а не "переадресацію" (redirect).

# Правило №2: Резервне правило для односторінкових додатків (SPA)
# Це стандартне правило для додатків на React, Vue, Angular і т.д.
# Якщо запит не відповідає жодному файлу або попередньому правилу,
# він повертає index.html. Це дозволяє React Router обробляти маршрутизацію на стороні клієнта.
# Це правило ПОВИННО йти останнім.
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200